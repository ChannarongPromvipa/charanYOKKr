<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>คำนวณปันผลหุ้น ไทย & สหรัฐ</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:#f9fafb; color:#1f2937; margin:0; }
    .wrap { max-width: 1200px; margin: 20px auto; padding: 20px; display:grid; gap:20px; }
    @media (min-width:1024px){ .wrap { grid-template-columns: 1fr 1fr; } }
    .card { background:#ffffff; border:1px solid #e5e7eb; border-radius:20px; padding:24px; box-shadow: 0 4px 12px rgba(0,0,0,.08); }
    h1 { margin:0 0 8px; font-size: clamp(20px, 3vw, 30px); color:#111827; }
    p.sub { margin:0 0 16px; color:#6b7280; font-size:14px; }
    label { display:block; font-size:14px; color:#374151; margin-bottom:6px; }
    input, select { width:100%; padding:10px; border-radius:12px; border:1px solid #d1d5db; background:#f9fafb; color:#111827; }
    input:focus, select:focus { border-color:#2563eb; outline:none; background:#fff; }
    .grid { display:grid; grid-template-columns:1fr; gap:12px; }
    @media (min-width:600px){ .grid { grid-template-columns:1fr 1fr; } }
    .pill { background:#f3f4f6; border:1px solid #e5e7eb; border-radius:14px; padding:12px; margin-top:10px; }
    .pill h3 { margin:0; font-size:13px; color:#4b5563; }
    .pill .val { font-size:20px; font-weight:700; color:#111827; margin-top:4px; }
    button { margin-top:10px; padding:10px 14px; border-radius:12px; border:1px solid #d1d5db; background:#f3f4f6; color:#111827; cursor:pointer; }
    button:hover { background:#e5e7eb; }
    .result { display:grid; grid-template-columns:1fr; gap:10px; margin-top:12px; }
    @media(min-width:700px){ .result { grid-template-columns:repeat(2,1fr); } }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- คำนวณหุ้นสหรัฐ -->
    <div class="card">
      <h1>คำนวณหุ้นปันผล (สหรัฐ)</h1>
      <p class="sub">ใส่จำนวนหุ้น ราคาต่อหุ้น และปันผลต่อหุ้น ระบบจะคำนวณผลตอบแทนพร้อมแปลงเป็นบาท (ถ้าใส่เรท)</p>
      <div class="grid">
        <div><label>จำนวนหุ้น</label><input id="usShares" type="number" value="1" /></div>
        <div><label>ราคาต่อหุ้น (USD)</label><input id="usPrice" type="number" value="15" /></div>
        <div><label>ปันผลต่อหุ้นต่อรอบ (USD)</label><input id="usDivps" type="number" value="0.50" /></div>
        <div><label>รอบการจ่าย</label><select id="usFreq"><option value="4">รายไตรมาส</option><option value="12">รายเดือน</option><option value="2">รายครึ่งปี</option><option value="1">รายปี</option></select></div>
        <div><label>หักภาษี ณ ที่จ่าย (%)</label><input id="usTax" type="number" value="0" /></div>
        <div><label>เรท USD → THB</label><input id="usFx" type="number" placeholder="36.5" /></div>
      </div>
      <button onclick="calcUS()">คำนวณ</button>
      <div id="usResults" class="result"></div>
    </div>

    <!-- คำนวณหุ้นไทย -->
    <div class="card">
      <h1>คำนวณหุ้นปันผล (ไทย)</h1>
      <p class="sub">คำนวณผลตอบแทนปันผล กำไรสุทธิหลังหักภาษี และอัตราปันผล (%)</p>
      <div class="grid">
        <div><label>จำนวนหุ้น</label><input id="thShares" type="number" value="100" /></div>
        <div><label>ราคาต่อหุ้น (บาท)</label><input id="thPrice" type="number" value="10" /></div>
        <div><label>ปันผลต่อหุ้น (บาท)</label><input id="thDivps" type="number" value="0.40" /></div>
        <div><label>จำนวนครั้งจ่ายต่อปี</label><select id="thFreq"><option value="1">1</option><option value="2">2</option><option value="4">4</option></select></div>
        <div><label>หักภาษี ณ ที่จ่าย (%)</label><input id="thTax" type="number" value="10" /></div>
        <div><label>ค่าธรรมเนียม (บาท)</label><input id="thFee" type="number" value="0" /></div>
      </div>
      <button onclick="calcTH()">คำนวณ</button>
      <div id="thResults" class="result"></div>
    </div>
  </div>

  <script>
    const fmtUSD = new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'});
    const fmtTHB = new Intl.NumberFormat('th-TH',{style:'currency',currency:'THB'});

    function calcUS(){
      const shares=+document.getElementById('usShares').value||0;
      const price=+document.getElementById('usPrice').value||0;
      const divps=+document.getElementById('usDivps').value||0;
      const freq=+document.getElementById('usFreq').value||1;
      const tax=+document.getElementById('usTax').value||0;
      const fx=+document.getElementById('usFx').value||null;

      const invest=shares*price;
      const gross=shares*divps;
      const net=gross*(1-tax/100);
      const grossYear=gross*freq;
      const netYear=net*freq;
      const yieldGross=invest>0?(grossYear/invest*100):0;
      const yieldNet=invest>0?(netYear/invest*100):0;

      const res=[
        {label:'มูลค่าลงทุนรวม',val:fmtUSD.format(invest),th:fx?`≈ ${fmtTHB.format(invest*fx)}`:''},
        {label:'ปันผลต่อรอบ (ก่อนหักภาษี)',val:fmtUSD.format(gross),th:fx?`≈ ${fmtTHB.format(gross*fx)}`:''},
        {label:'ปันผลต่อรอบ (หลังหักภาษี)',val:fmtUSD.format(net),th:fx?`≈ ${fmtTHB.format(net*fx)}`:''},
        {label:'ปันผลต่อปี (ก่อนหักภาษี)',val:fmtUSD.format(grossYear),th:fx?`≈ ${fmtTHB.format(grossYear*fx)}`:''},
        {label:'ปันผลต่อปี (หลังหักภาษี)',val:fmtUSD.format(netYear),th:fx?`≈ ${fmtTHB.format(netYear*fx)}`:''},
        {label:'Dividend Yield (ก่อนภาษี)',val:yieldGross.toFixed(2)+'%'},
        {label:'Dividend Yield (หลังภาษี)',val:yieldNet.toFixed(2)+'%'}
      ];
      const box=document.getElementById('usResults');
      box.innerHTML='';
      res.forEach(r=>{
        box.innerHTML+=`<div class='pill'><h3>${r.label}</h3><div class='val'>${r.val}</div>${r.th?`<div class='small'>${r.th}</div>`:''}</div>`;
      });
    }

    function calcTH(){
      const shares=+document.getElementById('thShares').value||0;
      const price=+document.getElementById('thPrice').value||0;
      const divps=+document.getElementById('thDivps').value||0;
      const freq=+document.getElementById('thFreq').value||1;
      const tax=+document.getElementById('thTax').value||0;
      const fee=+document.getElementById('thFee').value||0;

      const invest=shares*price;
      const gross=shares*divps;
      const grossYear=gross*freq;
      const taxAmt=grossYear*(tax/100);
      const netYear=grossYear-taxAmt-fee;
      const yieldGross=invest>0?(grossYear/invest*100):0;
      const yieldNet=invest>0?(netYear/invest*100):0;

      const res=[
        {label:'เงินลงทุนทั้งหมด',val:fmtTHB.format(invest)},
        {label:'ปันผลรวม (ก่อนภาษี) ต่อปี',val:fmtTHB.format(grossYear)},
        {label:`ภาษีหัก ณ ที่จ่าย (${tax}%)`,val:fmtTHB.format(taxAmt)},
        {label:'ค่าธรรมเนียม',val:fmtTHB.format(fee)},
        {label:'ปันผลสุทธิ ต่อปี',val:fmtTHB.format(netYear)},
        {label:'อัตราปันผล (ก่อนภาษี)',val:yieldGross.toFixed(2)+'%'},
        {label:'อัตราปันผลสุทธิ (หลังภาษี)',val:yieldNet.toFixed(2)+'%'}
      ];
      const box=document.getElementById('thResults');
      box.innerHTML='';
      res.forEach(r=>{
        box.innerHTML+=`<div class='pill'><h3>${r.label}</h3><div class='val'>${r.val}</div></div>`;
      });
    }

    calcUS();
    calcTH();
  </script>
</body>
</html>
