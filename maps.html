<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Map ‚Äî Thailand</title>
  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <style>
    /* Reset ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏ß‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ */
    html, body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      color: #111827;
      background: #f8fafc;
    }
    header {
      position: fixed;
      top: 12px;
      left: 12px;
      z-index: 1000;
      background: white;
      padding: 10px 14px;
      border-radius: 14px;
      box-shadow: 0 6px 24px rgba(0,0,0,.08);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    header h1 {
      font-size: 16px;
      margin: 0;
      font-weight: 700;
    }
    header .btn {
      appearance: none;
      border: 0;
      background: #111827;
      color: #fff;
      border-radius: 999px;
      padding: 8px 12px;
      cursor: pointer;
      font-weight: 600;
    }
    header .btn:disabled { opacity: .6; cursor: not-allowed; }

    /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
    .panel {
      position: fixed;
      right: 12px;
      top: 12px;
      z-index: 1000;
      width: min(340px, 90vw);
      background: white;
      border-radius: 14px;
      box-shadow: 0 6px 24px rgba(0,0,0,.08);
      padding: 12px;
    }
    .panel h2 { font-size: 14px; margin: 0 0 8px 0; }
    .panel label { display: block; font-size: 12px; color: #374151; margin: 6px 0 2px; }
    .panel input {
      width: 100%; padding: 8px 10px; border-radius: 10px; border: 1px solid #e5e7eb;
    }
    .panel .row { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    .panel .mini { font-size: 12px; color: #6b7280; margin-top: 6px; }

    /* ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà */
    #map { height: 100%; width: 100%; }
  </style>
</head>
<body>
  <header>
    <h1>Thailand Map</h1>
    <button id="locateBtn" class="btn" title="‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô">üìç Locate me</button>
    <button id="resetBtn" class="btn" title="‡∏ã‡∏π‡∏°‡∏Å‡∏•‡∏±‡∏ö‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û">üîÑ Reset</button>
  </header>

  <aside class="panel">
    <h2>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏∏‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß</h2>
    <div class="row">
      <div>
        <label>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</label>
        <input id="placeName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ö‡πâ‡∏≤‡∏ô/‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®/‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡πÅ‡∏ü" />
      </div>
      <div>
        <label>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
        <input id="placeDesc" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏±‡πâ‡∏ô ‡πÜ" />
      </div>
    </div>
    <div class="row">
      <div>
        <label>Latitude</label>
        <input id="latInput" placeholder="13.9648486" />
      </div>
      <div>
        <label>Longitude</label>
        <input id="lngInput" placeholder="100.4978506" />
      </div>
    </div>
    <p class="mini">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡∏¥‡∏°‡∏Ñ‡πà‡∏≤ lat/lng ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î Enter ‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡πÉ‡∏î‡∏ä‡πà‡∏≠‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏∏‡∏î</p>
  </aside>

  <div id="map"></div>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <script>
    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
    const DEFAULT_CENTER = [13.9648486, 100.4978506]; // ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø
    const DEFAULT_ZOOM = 12;

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà
    const map = L.map('map').setView(DEFAULT_CENTER, DEFAULT_ZOOM);

    // ‡πÄ‡∏•‡πÄ‡∏¢‡∏≠‡∏£‡πå‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà (‡∏ü‡∏£‡∏µ ‡πÑ‡∏°‡πà‡∏°‡∏µ API key)
    const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // ‡∏™‡πÄ‡∏Å‡∏•
    L.control.scale().addTo(map);

    // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏°‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    const places = [
      { name: '‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ( YAS )', desc: 'Grand Palace Area', lat: 13.8520693, lng: 100.5609974 },
    ];

    const markers = L.layerGroup().addTo(map);

    function addMarker(p) {
      const m = L.marker([p.lat, p.lng]).addTo(markers);
      m.bindPopup(`<b>${p.name || '‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å'}</b><br>${p.desc || ''}<br><small>${p.lat.toFixed(5)}, ${p.lng.toFixed(5)}</small>`);
      return m;
    }

    // ‡∏ß‡∏≤‡∏î‡∏´‡∏°‡∏∏‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
    places.forEach(addMarker);

    // ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡πà‡∏≤‡∏û‡∏¥‡∏Å‡∏±‡∏î
    const latInput = document.getElementById('latInput');
    const lngInput = document.getElementById('lngInput');
    const placeName = document.getElementById('placeName');
    const placeDesc = document.getElementById('placeDesc');

    map.on('click', (e) => {
      const { lat, lng } = e.latlng;
      latInput.value = lat.toFixed(6);
      lngInput.value = lng.toFixed(6);
    });

    function tryAddFromInputs() {
      const lat = parseFloat(latInput.value);
      const lng = parseFloat(lngInput.value);
      if (!Number.isFinite(lat) || !Number.isFinite(lng)) return;
      addMarker({
        lat, lng,
        name: placeName.value.trim(),
        desc: placeDesc.value.trim(),
      }).openPopup();
      // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ä‡∏∑‡πà‡∏≠/‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢
      placeName.value = '';
      placeDesc.value = '';
    }

    latInput.addEventListener('keydown', (ev) => {
      if (ev.key === 'Enter') tryAddFromInputs();
    });
    lngInput.addEventListener('keydown', (ev) => {
      if (ev.key === 'Enter') tryAddFromInputs();
    });

    // ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
    const locateBtn = document.getElementById('locateBtn');
    locateBtn.addEventListener('click', () => {
      locateBtn.disabled = true;
      map.locate({ setView: true, maxZoom: 16, enableHighAccuracy: true });
    });

    map.on('locationfound', (e) => {
      const radius = e.accuracy;
      const here = L.marker(e.latlng).addTo(markers).bindPopup('‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏ô‡∏µ‡πâ');
      L.circle(e.latlng, radius).addTo(markers);
      here.openPopup();
      locateBtn.disabled = false;
    });

    map.on('locationerror', () => {
      alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏î‡πâ ‡πÇ‡∏õ‡∏£‡∏î‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Location ‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå');
      locateBtn.disabled = false;
    });

    // ‡∏õ‡∏∏‡πà‡∏° Reset ‡∏Å‡∏•‡∏±‡∏ö‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û
    document.getElementById('resetBtn').addEventListener('click', () => {
      map.setView(DEFAULT_CENTER, DEFAULT_ZOOM);
    });

    // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á GeoJSON (‡∏£‡∏π‡∏õ‡∏ó‡∏£‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏á‡πà‡∏≤‡∏¢) ‚Äî ‡πÄ‡∏Ç‡∏ï‡∏û‡∏£‡∏∞‡∏ô‡∏Ñ‡∏£‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡πÑ‡∏°‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥)
    const samplePolygon = {
      "type": "Feature",
      "properties": { "name": "‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà" },
      "geometry": {
        "type": "Polygon",
        "coordinates": [[
          [100.488, 13.762],
          [100.506, 13.762],
          [100.506, 13.742],
          [100.488, 13.742],
          [100.488, 13.762]
        ]]
      }
    };

    L.geoJSON(samplePolygon, {
      style: { color: '#2563eb', weight: 2, opacity: 0.8, fillOpacity: 0.05 }
    }).addTo(map).bindPopup('‡πÇ‡∏û‡∏•‡∏¥‡∏Å‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏î‡πâ)');
  </script>
</body>
</html>
